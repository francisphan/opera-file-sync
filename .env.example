# Salesforce OAuth Credentials
SF_INSTANCE_URL=https://YOUR_INSTANCE.my.salesforce.com
SF_CLIENT_ID=YOUR_CLIENT_ID_HERE
SF_CLIENT_SECRET=YOUR_CLIENT_SECRET_HERE
SF_REFRESH_TOKEN=YOUR_REFRESH_TOKEN_HERE

# Salesforce Object Configuration
SF_OBJECT=TVRS_Guest__c
SF_EXTERNAL_ID_FIELD=Email__c

# OPERA Export Configuration
EXPORT_DIR=D:\MICROS\opera\export\OPERA\vines
PROCESSED_DIR=D:\MICROS\opera\export\OPERA\vines\processed
FAILED_DIR=D:\MICROS\opera\export\OPERA\vines\failed

# File Processing
FILE_FORMAT=auto
# Supported formats: csv, xml, auto (auto-detect based on extension)

# Sync Configuration
SYNC_MODE=upsert
# upsert = create or update based on external ID
# insert = only create new records

# Logging
LOG_LEVEL=warn
# Levels: error, warn (default), info, debug

# Processing Options
BATCH_SIZE=200
# Number of records to send to Salesforce in each batch

FILE_PROCESSING_DELAY=2000
# Milliseconds to wait after file appears (ensures file is fully written)

# File Retention
KEEP_PROCESSED_FILES=true
# If false, files are deleted after processing instead of moved to PROCESSED_DIR

# ===================================================================
# Email Notifications (Gmail OAuth2)
# ===================================================================

# Enable/disable email notifications
EMAIL_ENABLED=true

# Gmail OAuth2 (recommended - run: node get-gmail-oauth-token.js)
SMTP_USER=your-email@gmail.com
GMAIL_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID
GMAIL_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
GMAIL_REFRESH_TOKEN=YOUR_GMAIL_REFRESH_TOKEN

# Email Addresses
EMAIL_FROM=OPERA Sync <your-email@gmail.com>
EMAIL_TO=admin@yourcompany.com
# Comma-separated for multiple recipients: admin@company.com,it@company.com

# Notification Settings
ERROR_THRESHOLD=3
# Number of consecutive errors before sending notification

ERROR_NOTIFICATION_THROTTLE=15
# Minutes to wait before sending another error notification (prevents spam)

# ===================================================================
# Alternative: Standard SMTP (if not using Gmail OAuth)
# ===================================================================
# If GMAIL_CLIENT_ID is not set, the notifier falls back to SMTP:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_PASSWORD=YOUR_APP_PASSWORD_HERE

# ===================================================================
# Slack Notifications (Optional - alternative to email)
# ===================================================================

# Slack Webhook URL (leave empty to disable)
SLACK_WEBHOOK_URL=
# Create webhook at: https://api.slack.com/messaging/webhooks

# ===================================================================
# OPERA Oracle Database (for direct queries)
# ===================================================================
ORACLE_HOST=YOUR_ORACLE_HOST
ORACLE_PORT=1521
# Use ORACLE_SID for SID-based connections, or ORACLE_SERVICE for service name
ORACLE_SID=OPERA
# ORACLE_SERVICE=
ORACLE_USER=YOUR_USERNAME
ORACLE_PASSWORD=YOUR_PASSWORD

# ===================================================================
# Sync Source Configuration
# ===================================================================
# 'file' = CSV file watcher (opera-file-sync.js)
# 'db' = Oracle CQN event-driven (opera-db-sync.js)
SYNC_SOURCE=db

# CQN debounce window - batches rapid changes before processing (ms)
CQN_DEBOUNCE_MS=5000

# ===================================================================
# Duplicate Detection
# ===================================================================

# Enable/disable duplicate detection
ENABLE_DUPLICATE_DETECTION=true

# Probability threshold for skipping duplicates (0-100)
# Records with probability >= threshold will be skipped and reported
DUPLICATE_THRESHOLD=75

# Cache TTL for Salesforce records (ms)
# How long to keep the SF cache before refreshing (default: 1 hour)
DUPLICATE_CACHE_TTL=3600000

# ===================================================================
# Daily Summary Reports
# ===================================================================

# Enable/disable daily summary emails
ENABLE_DAILY_SUMMARY=true

# Time to send daily summary (24-hour format)
DAILY_SUMMARY_TIME=9:00

# Timezone for daily summary scheduling
# Use IANA timezone format (e.g., America/Argentina/Buenos_Aires)
DAILY_SUMMARY_TIMEZONE=America/Argentina/Buenos_Aires

# ===================================================================
# Kill Switch
# ===================================================================

# Andon cord â€” set to 'true' to pause all Salesforce uploads (sync state preserved for catch-up)
# ANDON_CORD=true

# ===================================================================
# Feature Flags
# ===================================================================

# Sync phone number from Oracle DB to Salesforce Telephone__c field
SYNC_PHONE_FIELD=true

# Sync language preference from Oracle DB to Salesforce Language__c field
SYNC_LANGUAGE_FIELD=true
